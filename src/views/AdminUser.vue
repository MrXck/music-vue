<template>    <n-space style="margin: 10px 0">        <n-space>            <n-input @keydown.enter="search" v-model:value="keyword" type="text" placeholder="请输入关键词"/>        </n-space>        <n-space>            <n-button @click="search">搜索</n-button>        </n-space>        <n-space>            <n-button @click="clean">新增</n-button>        </n-space>    </n-space>    <n-table style="margin: 10px 0">        <thead>        <tr>            <th>id</th>            <th>用户名</th>            <th>手机号</th>            <th>创建时间</th>            <th>操作</th>        </tr>        </thead>        <tbody>        <tr v-for="item in userList" :key="item.id">            <td>{{ item.id }}</td>            <td>{{ item.username }}</td>            <td>{{ item.phone }}</td>            <td>{{ item.createTime.replace('T', ' ') }}</td>            <td>                <n-button type="info" size="small" ghost @click="update(item)">                    修改                </n-button>                <n-button style="margin-left: 10px" type="error" size="small" ghost @click="deleteById(item.id)">                    删除                </n-button>            </td>        </tr>        </tbody>    </n-table>    <n-space justify="center">        <n-empty v-show="totalPage === 0" description="暂无">        </n-empty>    </n-space>    <n-pagination        style="padding: 10px"        v-show="totalPage >= 1"        v-model:page="page"        :page-count="totalPage"        size="medium"        show-quick-jumper        show-size-picker        :page-sizes="[10, 20, 30, 40]"        @update:page="updatePage"        @update:page-size="updatePageSize"    />    <n-modal        v-model:show="showModal"        preset="dialog"        title="修改"        positive-text="确认"        negative-text="取消"        @positive-click="updateRole"    >        <n-space vertical>            用户名            <n-input v-model:value="user.username" type="text" placeholder="用户名"/>            手机号            <n-input v-model:value="user.phone" type="text" placeholder="用户名"/>            密码            <n-input v-model:value="user.password" type="password" placeholder="密码"/>        </n-space>    </n-modal></template><script>import {NTable, NButton, useMessage, NSpace, NModal, NInput, NEmpty, NPagination} from 'naive-ui'import request from '../utils/request'import {reactive, onMounted, ref} from 'vue'export default {    name: 'AdminUser',    components: {NTable, NButton, NSpace, NModal, NInput, NEmpty, NPagination},    setup(){        const message = useMessage()        let keyword = ref('')        let page = ref(1)        let pageSize = ref(10)        let totalPage = ref(0)        let userList = reactive([])        let user = reactive({            id: '',            username: '',            phone: '',            password: '',            avatar: '',            createTime: '',        })        let showModal = ref(false)        function init() {            request.get(`/admin/user/page?pageSize=${pageSize.value}&pageNum=${page.value}&keyword=${keyword.value}`).then(res => {                if (res.data.code === 1) {                } else {                    userList.length = 0                    totalPage.value = res.data.data.pages                    page.value = res.data.data.current                    userList.push(...res.data.data.records)                }            })        }        onMounted(() => {            init()        })        function deleteById(id) {            request.post(`/user/delete/${id}`).then(res => {                if (res.data.code === 1) {                    message.error('删除失败')                } else {                    message.success('删除成功')                }            }).finally(() => {                init()            })        }        function updatePage(value) {            page.value = value            init()        }        function updatePageSize(value) {            pageSize.value = value            init()        }        function search() {            init()        }        function update(item) {            showModal.value = true            user.id = item.id            user.username = item.username            user.password = item.password            user.phone = item.phone            user.avatar = item.avatar            user.createTime = item.createTime        }        function updateRole() {            request.post('/user/update', user).then(res => {                if (res.data.code === 1) {                    message.error('修改失败')                } else {                    message.success('修改成功')                }            }).finally(() => {                init()            })        }        function clean(){            showModal.value = true            user.id = ''            user.username = ''            user.password = ''            user.phone = ''            user.avatar = ''            user.createTime = ''        }        return {            keyword,            showModal,            userList,            user,            page,            pageSize,            totalPage,            deleteById,            updatePage,            updatePageSize,            search,            update,            updateRole,            clean,        }    }}</script><style scoped></style>