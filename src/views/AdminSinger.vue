<template>    <n-space style="margin: 10px 0">        <n-space>            <n-input @keydown.enter="search" v-model:value="keyword" type="text" placeholder="请输入关键词"/>        </n-space>        <n-space>            <n-button @click="search">搜索</n-button>        </n-space>        <n-space>            <n-button @click="add">新增</n-button>        </n-space>    </n-space>    <n-table style="margin: 10px 0">        <thead>        <tr>            <th>序号</th>            <th>歌手名</th>            <th>操作</th>        </tr>        </thead>        <tbody>        <tr v-for="(item, index) in singerList" :key="item.id">            <td>{{ index + 1 }}</td>            <td>{{ item.name }}</td>            <td>                <n-button type="info" size="small" ghost @click="update(item.id)">                    修改                </n-button>                <n-button style="margin-left: 10px" type="error" size="small" ghost @click="deleteById(item.id)">                    删除                </n-button>            </td>        </tr>        </tbody>    </n-table>    <n-space justify="center">        <n-empty v-show="totalPage === 0" description="暂无">        </n-empty>    </n-space>    <n-pagination        style="padding: 10px"        v-show="totalPage >= 1"        v-model:page="page"        :page-count="totalPage"        size="medium"        show-quick-jumper        show-size-picker        :page-sizes="[10, 20, 30, 40]"        @update:page="updatePage"        @update:page-size="updatePageSize"    /></template><script>import {NTable, NButton, useMessage, NSpace, NInput, NEmpty, NPagination, NModal} from 'naive-ui'import request from '../utils/request'import {reactive, onMounted, ref} from 'vue'import {useRouter} from 'vue-router'export default {    name: 'AdminSinger',    components: {NTable, NButton, NSpace, NModal, NInput, NEmpty, NPagination},    setup() {        const message = useMessage()        const router = useRouter()        let keyword = ref('')        let page = ref(1)        let pageSize = ref(10)        let totalPage = ref(0)        let singerList = reactive([])        function init() {            request.get(`/singer/page?pageSize=${pageSize.value}&pageNum=${page.value}&keyword=${keyword.value}`).then(res => {                if (res.data.code === 1) {                } else {                    singerList.length = 0                    totalPage.value = res.data.data.pages                    page.value = res.data.data.current                    singerList.push(...res.data.data.records)                }            })        }        onMounted(() => {            init()        })        function deleteById(id) {            request.post(`/admin/singer/delete/${id}`).then(res => {                if (res.data.code === 1) {                    message.error('删除失败')                } else {                    message.success('删除成功')                }            }).finally(() => {                init()            })        }        function updatePage(value) {            page.value = value            init()        }        function updatePageSize(value) {            pageSize.value = value            init()        }        function search() {            init()        }        function add(){            router.push("/admin/singerUpdate")        }        function update(id){            router.push("/admin/singerUpdate?id=" + id)        }        return {            keyword,            singerList,            page,            pageSize,            totalPage,            deleteById,            updatePage,            updatePageSize,            search,            add,            update,        }    }}</script><style scoped></style>