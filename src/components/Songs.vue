<template>    <n-space align="center">        <n-button v-if="total > 0" @click="playAll" round size="medium" type="primary">            <n-icon>                <svg xmlns="http://www.w3.org/2000/svg"                     xmlns:xlink="http://www.w3.org/1999/xlink"                     viewBox="0 0 512 512">                    <path                        d="M133 440a35.37 35.37 0 0 1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0 1 35.77.45l247.85 148.36a36 36 0 0 1 0 61l-247.89 148.4A35.5 35.5 0 0 1 133 440z"                        fill="currentColor"></path>                </svg>            </n-icon>            播放全部        </n-button>        <n-button v-else disabled @click="playAll" round size="medium" type="primary">            <n-icon>                <svg xmlns="http://www.w3.org/2000/svg"                     xmlns:xlink="http://www.w3.org/1999/xlink"                     viewBox="0 0 512 512">                    <path                        d="M133 440a35.37 35.37 0 0 1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0 1 35.77.45l247.85 148.36a36 36 0 0 1 0 61l-247.89 148.4A35.5 35.5 0 0 1 133 440z"                        fill="currentColor"></path>                </svg>            </n-icon>            播放全部        </n-button>        <span class="total">共找到{{ total }}首单曲</span>    </n-space>    <n-space v-if="isLoading" justify="center">        <n-spin size="large"/>    </n-space>    <div v-else>        <SongTable :songList="songs" @init="init" :needSinger="true"/>        <n-space v-if="total > 0" justify="center">            <n-pagination                v-model:page="page"                v-model:page-size="pageSize"                :page-count="totalPage"                show-size-picker                @update:page="updatePage"                @update:page-size="updatePageSize"                :page-sizes="[10, 20, 30, 40]"            />        </n-space>    </div></template><script>import {NButton, NIcon, NSpace, NPagination, NSpin} from 'naive-ui'import {usePlayStore} from '../store'import SongTable from './SongTable'import {onMounted, reactive, ref, watch} from 'vue'import request from '../utils/request'export default {    name: 'Songs',    props: ['keyword'],    setup(props){        let playStore = usePlayStore()        let songs = reactive([])        let page = ref(1)        let pageSize = ref(10)        let total = ref(0)        let totalPage = ref(0)        let isLoading = ref(true)        let keyword = ref(props.keyword)        onMounted(() => {            init()        })        watch(() => props.keyword, (newVal) => {            keyword.value = newVal;            init()        });        function init(){            isLoading.value = true            request.get(`/song/search?keyword=${keyword.value}&pageSize=${pageSize.value}&pageNum=${page.value}`).then(res => {                if (res.data.code === 0) {                    songs.splice(0, songs.length)                    songs.push(...res.data.data.records)                    for (let i = 0; i < songs.length; i++) {                        let second = Math.floor(songs[i].time % 60)                        if (second.toString().length < 2) {                            second = '0' + second                        }                        songs[i].time = Math.floor(songs[i].time / 60) + ':' + second                    }                    page.value = res.data.data.current                    pageSize.value = res.data.data.size                    total.value = res.data.data.total                    totalPage.value = res.data.data.pages                    isLoading.value = false                }            })        }        function playAll() {            playStore.play(songs, songs[0])        }        function updatePage(value){            page.value = value            init()        }        function updatePageSize(value){            pageSize.value = value            init()        }        return {            songs,            page,            pageSize,            total,            totalPage,            isLoading,            playAll,            updatePage,            updatePageSize,            init,        }    },    components: {        SongTable,        NIcon,        NButton,        NSpace,        NPagination,        NSpin,    }}</script><style scoped>.total{    color: #999a9c;}.n-pagination{    margin-top: 10px;}</style>